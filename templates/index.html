{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<style>
.table-g2pv, .table-g4pv {
	background: lightseagreen;
    color: black;
}
.table-g1pv, .table-g3pv {
	background: lightblue;
    color: black;
}
</style>

{% endblock stylesheets %}

{% block content %}

    <div class="pcoded-content">
        <div class="pcoded-inner-content">
            <!-- [ breadcrumb ] start -->

            <!-- [ breadcrumb ] end -->
            <div class="main-body">
                <div class="page-wrapper">
                    <!-- [ Main Content ] start -->
                    <div class="card">
                        <div class="card-header">
                            <h5>Overview</h5>
                            <div class="float-right">
                                <form method="POST" action="{% url 'dashboard:dashboard' %}">
                                    {% csrf_token %}
                                     <label for="from">From</label>
                                     <input type="text" id="from" name="dates"  value="11/20/2020 - 11/30/2020">
     
                                     <input class="btn btn-dark" type="submit" id="date-sub-btn" value="View Results"/>
                                 </form>
                            </div>
                        </div>
                    </div>      
                    <div class="row">
                        <div id="donutchart_votes" style="width: 600px; height: 350px;"></div>

                        <div id="donutchart_voters" style="width: 600px; height: 350px;"></div>

                        <div id="donutchart_votes_datewise" style="width: 400px; height: 350px;"></div>

                        <!--[ year  sales section ] end-->
                        <!--[ Recent Users ] start-->
                        <div class="col-xl-12 col-md-12 m-b-30">

                            <div class="card Recent-Users" >
                                <div class="card-header">
                                    <h5>Recent Games</h5>
                                    <span class="float-right"><b>Last Status Updated :</b> {{last_status_updated_dashboard}} UTC</span>
                                </div>
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Game</th>
                                                <th>Particiapent</th>
                                                <th>Percent</th>
                                                <th>Total Votes</th>
                                                <th class="text-success">Authenticated</th>
                                                <th class="text-warning">Pending</th>
                                                <th class="text-danger">Disqualified</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr>
                                                <td><h6 class="m-0">Game 25</h6></td>
                                                <td class="table-g1pv"><h6 class="m-0">#2 Harvard - Opportunes </h6></td>
                                                <td class="table-g1pv">{{g25_p1_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_harvard_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_harvard_auth_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_harvard_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_harvard_dis_votes}}</h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 25</h6></td>
                                                <td class="table-g1pv"><h6 class="m-0">#2 Rutgers-Raag </h6></td>
                                                <td class="table-g1pv">{{g25_p2_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_rutgers_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_rutgers_auth_votes}}   </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_rutgers_pending_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g25_rutgers_dis_votes}}  </h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 26</h6></td>
                                                <td class="table-g2pv"><h6 class="m-0">#2 U Penn - Penn Masala </h6></td>
                                                <td class="table-g2pv">{{g26_p1_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_penn_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_penn_auth_votes}}  </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_penn_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_penn_dis_votes}}     </h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 26</h6></td>
                                                <td class="table-g2pv"><h6 class="m-0">#2 U illinois - No Comment </h6></td>
                                                <td class="table-g2pv">{{g26_p2_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_illinois_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_illinois_auth_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_illinois_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g26_illinois_dis_votes}} </h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 27</h6></td>
                                                <td class="table-g3pv"><h6 class="m-0">#1 Vanderbilt - Melodores </h6></td>
                                                <td class="table-g3pv">{{g27_p1_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_vanderbilt_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_vanderbilt_auth_votes}}  </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_vanderbilt_pending_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_vanderbilt_dis_votes}}    </h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 27</h6></td>
                                                <td class="table-g3pv"><h6 class="m-0">#3 Florida State - All-Night Yahtzee </h6></td>
                                                <td class="table-g3pv">{{g27_p2_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_florida_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_florida_auth_votes}}   </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_florida_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g27_florida_dis_votes}} </h6></td>
                                            </tr>
                                            <tr>
                                                <td><h6 class="m-0">Game 28</h6></td>
                                                <td class="table-g4pv"><h6 class="m-0">#2 Brigham Young U-Vocal Point </h6></td>
                                                <td class="table-g4pv">{{g28_p1_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_bringham_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_bringham_auth_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_bringham_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_bringham_dis_votes}}  </h6></td>
                                            </tr>

                                            <tr>
                                                <td><h6 class="m-0">Game 28</h6></td>
                                                <td class="table-g4pv"><h6 class="m-0">#1 UCLA - Scattertones </h6></td>
                                                <td class="table-g4pv">{{g28_p2_prcnt | floatformat}}%</td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_ucla_total_votes}}</h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_ucla_auth_votes}}  </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_ucla_pending_votes}} </h6></td>
                                                <td><h6 class="m-0 text-c-dark">{{g28_ucla_dis_votes}}  </h6></td>
                                            </tr>
                                        </tbody>
                                    </table>


                            </div>
                        </div>
                        <!--[ Recent Users ] end-->
                    </div>
                    <!-- [ Main Content ] end -->
                </div>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>
    var auth_voters = "{{auth_voters}}";
    var pending_voters = "{{verification_pending}}";
    var disqualified_voters = "{{invalid_voters}}";
    var total_voters = "{{total_voters}}";

    var total_votes = "{{total_votes}}";
    var auth_votes = "{{auth_votes}}";
    var pending_votes = "{{pending_votes}}";
    var dis_votes = "{{dis_votes}}";

    var duplicates_votes = "{{duplicates_votes}}";
    

</script>
<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<script>
  
    $('input[name="dates"]').daterangepicker();

</script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        // for voters chart
        var data = google.visualization.arrayToDataTable([
          ['Voter', 'Percent'],
          ['Auth Voters',     parseInt(auth_voters)],
          ['Pending Voters',      parseInt(pending_voters)],
          ['Disqualified Voters',  parseInt(disqualified_voters)],

        ]);

        var options = {
          title: 'Voters : '+String(total_voters),
          pieHole: 0.5,
          slices: [{color: '#3366cc'},  {color: '#ff9900'}, {color: '#dc3912'},]
        };

        var chart1 = new google.visualization.PieChart(document.getElementById('donutchart_voters'));
        chart1.draw(data, options);

        // for votes chart
        var data2 = google.visualization.arrayToDataTable([
          ['Votes', 'Percent'],
          ['Duplicate Votes',  parseInt(duplicates_votes)],
          ['Auth Votes',  parseInt(auth_votes)],
          ['Pending Votes',  parseInt(pending_votes)],
          ['Disqualified Votes',  parseInt(dis_votes)],

        ]);

        var options2 = {
          title: 'Votes : '+String(total_votes),
          pieHole: 0.5,
          slices: [{color: '#990099'}, {color: '#3366cc'},  {color: '#ff9900'}, {color: '#dc3912'},]
        };

        var chart2 = new google.visualization.PieChart(document.getElementById('donutchart_votes'));
        chart2.draw(data2, options2);


      }
    </script>
{% endblock javascripts %}
